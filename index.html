<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HardHatHub | Canada's Industrial Workforce Pipeline</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        :root { font-family: 'Plus Jakarta Sans', sans-serif; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-font-smoothing: antialiased; }
        .title-straight { font-style: normal !important; letter-spacing: -0.04em; line-height: 0.95; }
        
        /* Industrial Feed Styling */
        .job-card, .ad-card { 
            display: flex; flex-direction: column; transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); 
            border: 1.5px solid #f1f5f9; background: white; text-decoration: none;
            color: inherit; height: 100%;
        }
        .job-card:hover { transform: translateY(-8px); border-color: #facc15; box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.1); }
        .ad-card { background: #fffbeb; border: 2px dashed #fcd34d; }
        .description-text { display: -webkit-box; -webkit-line-clamp: 5; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; }

        /* Enterprise Legal Overlay */
        .legal-view { display: none; background: white; border-radius: 3rem; padding: 5rem; margin-top: 2rem; border: 1px solid #e2e8f0; }
        .active-legal { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-900 flex flex-col min-h-screen">

    <nav class="bg-white/95 backdrop-blur-md border-b border-slate-200 py-5 sticky top-0 z-[100]">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <h1 class="text-2xl font-black tracking-tighter cursor-pointer" onclick="window.location.reload()">
                <span class="bg-yellow-500 text-black px-2 py-0.5 rounded uppercase">HH</span>
                <span class="uppercase italic">HARDHAT<span class="text-yellow-500">HUB</span></span>
            </h1>
            <button class="bg-yellow-500 text-black px-6 py-3 rounded-xl font-black text-xs shadow-lg uppercase tracking-widest hover:bg-black hover:text-white transition-all">Post Ad ‚Äî $49</button>
        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto px-4 py-16 w-full">
        <div id="feed-container">
            <div class="mb-16">
                <h2 class="text-7xl md:text-8xl font-black uppercase title-straight mb-10 tracking-tighter">Logistics<br><span class="text-yellow-500">Pipeline</span></h2>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8 border-t border-slate-200 pt-12 text-slate-500">
                    <div>
                        <h4 class="font-black text-[11px] uppercase tracking-widest mb-2 text-black underline decoration-yellow-500 underline-offset-4">Material Handlers</h4>
                        <p class="text-[10px] font-bold uppercase leading-relaxed">Freight sorting and heavy-lift dock operations.</p>
                    </div>
                    <div>
                        <h4 class="font-black text-[11px] uppercase tracking-widest mb-2 text-black underline decoration-yellow-500 underline-offset-4">PIT Operators</h4>
                        <p class="text-[10px] font-bold uppercase leading-relaxed">Certified forklift and high-reach equipment.</p>
                    </div>
                    <div>
                        <h4 class="font-black text-[11px] uppercase tracking-widest mb-2 text-black underline decoration-yellow-500 underline-offset-4">Warehouse Ops</h4>
                        <p class="text-[10px] font-bold uppercase leading-relaxed">Inventory flow and industrial safety management.</p>
                    </div>
                    <div>
                        <h4 class="font-black text-[11px] uppercase tracking-widest mb-2 text-black underline decoration-yellow-500 underline-offset-4">Fulfillment</h4>
                        <p class="text-[10px] font-bold uppercase leading-relaxed">E-commerce picking and high-velocity shipping.</p>
                    </div>
                </div>
            </div>

            <div id="job-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>

        <div id="legal-section" class="legal-view">
            <button onclick="closeLegal()" class="mb-12 font-black text-xs uppercase tracking-widest text-slate-400 hover:text-black">‚Üê Return to Feed</button>
            <div id="legal-body" class="max-w-4xl mx-auto prose prose-slate"></div>
        </div>
    </main>

    <footer class="bg-gradient-to-b from-slate-900 via-slate-900 to-black text-slate-400 pt-24 pb-12 mt-20 border-t-8 border-yellow-500">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-20">
                <div class="col-span-1">
                    <h1 class="text-white text-2xl font-black tracking-tighter mb-6 uppercase italic">HH <span class="text-yellow-500">HUB</span></h1>
                    <p class="text-[10px] font-bold uppercase leading-relaxed opacity-60">Canada's verified industrial workforce engine. Verified shifts. Industrial gear.</p>
                </div>
                <div>
                    <h4 class="text-white font-black uppercase text-[10px] tracking-[0.2em] mb-8">Governance</h4>
                    <ul class="space-y-4 text-[11px] font-bold uppercase tracking-tight">
                        <li><button onclick="openLegal('terms')" class="hover:text-yellow-500">Terms of Service</button></li>
                        <li><button onclick="openLegal('privacy')" class="hover:text-yellow-500">Privacy & PIPEDA</button></li>
                        <li><button onclick="openLegal('security')" class="hover:text-yellow-500">Security Architecture</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-black uppercase text-[10px] tracking-[0.2em] mb-8">Operations</h4>
                    <ul class="space-y-4 text-[11px] font-bold uppercase tracking-tight">
                        <li><a href="#" class="hover:text-yellow-500">Verification Process</a></li>
                        <li><a href="#" class="hover:text-yellow-500">Brand Kit</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-black uppercase text-[10px] tracking-[0.2em] mb-8">Inquiries</h4>
                    <p class="text-[11px] font-bold uppercase tracking-tight text-white mb-2">Legal: compliance@hardhathub.ca</p>
                </div>
            </div>
            
            <div class="pt-12 border-t border-white/10 text-center">
                <p class="text-[10px] font-black uppercase tracking-[0.4em] text-slate-600 mb-8">¬© 2026 HARDHAT HUB CANADA | REGISTERED TRADEMARK</p>
                <div class="max-w-3xl mx-auto p-8 bg-white/5 rounded-3xl border border-white/5">
                    <p class="text-[9px] italic opacity-50 leading-relaxed uppercase tracking-widest">
                        Amazon Associate Disclosure: As an Amazon Associate, HardHatHub earns from qualifying purchases. This platform earns commissions through the Amazon.ca Associates Program to maintain this free industrial resource.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const SB_URL = "https://oakwbsqdcljxckfmjyva.supabase.co"; 
        const SB_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ha3dic3FkY2xqeGNrZm1qeXZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3NTI3NDcsImV4cCI6MjA4NDMyODc0N30.T_S_AeKeeM13cNPnggh26xj9jGNgCLocB5n84pjDqfI";
        const _supabase = supabase.createClient(SB_URL, SB_KEY);

        async function fetchJobs() {
            const { data } = await _supabase.from('jobs').select('*').order('created_at', { ascending: false });
            if (data) renderJobs(data);
        }

        function renderJobs(jobs) {
            const grid = document.getElementById('job-grid');
            let html = "";
            jobs.forEach((job, index) => {
                // RESTORED PERTINENT DATA LOGIC
                html += `
                <a href="${job.apply_link || job.link}" target="_blank" class="job-card p-10 rounded-[3rem]">
                    <div class="flex-grow">
                        <span class="text-[9px] font-black bg-slate-100 text-slate-500 px-3 py-1.5 rounded-full uppercase tracking-widest mb-6 inline-block">Verified Shift</span>
                        <h3 class="text-2xl font-black uppercase title-straight mb-1 tracking-tight">${job.title}</h3>
                        <p class="text-[12px] font-black text-yellow-600 uppercase tracking-widest mb-6">${job.company}</p>
                        <p class="text-[11px] font-bold text-slate-400 uppercase leading-relaxed description-text">${job.description || 'Access full industrial requirements and site location via employer portal.'}</p>
                    </div>
                    <div class="mt-10 pt-6 border-t border-slate-50 flex items-center justify-between font-black uppercase text-[10px] tracking-widest">
                        <span class="text-slate-400">Portal Access</span><span class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center text-sm shadow-xl">‚Üó</span>
                    </div>
                </a>`;
                
                // ROTATING GEAR LOGIC (Prioritizing high-commission boots)
                if ((index + 1) % 5 === 0) {
                    const isBoot = (index + 1) % 10 !== 0; // Boots every 5th, Ergodyne every 10th
                    const adData = isBoot ? {
                        title: "Timberland PRO Endurance",
                        desc: "CSA Grade 1 safety with anti-fatigue tech. Built for 12-hour concrete shifts.",
                        link: "https://amzn.to/3YOkD67",
                        icon: "ü•æ"
                    } : {
                        title: "Ergodyne ProFlex 1600",
                        desc: "Industrial-grade back support with suspenders. Essential for high-volume handling.",
                        link: "https://amzn.to/3LrtIyS",
                        icon: "üõ†Ô∏è"
                    };

                    html += `
                    <div class="ad-card p-10 rounded-[3rem] flex flex-col justify-between">
                        <div><div class="w-16 h-16 bg-yellow-500 rounded-2xl mb-8 flex items-center justify-center shadow-xl transform rotate-2"><span class="text-4xl">${adData.icon}</span></div>
                        <span class="text-[9px] font-black bg-black text-white px-3 py-1.5 rounded-full uppercase tracking-widest mb-6 inline-block">Pipeline Essential</span>
                        <h3 class="text-2xl font-black uppercase title-straight mb-2 tracking-tight">${adData.title}</h3>
                        <p class="text-[11px] font-bold text-slate-600 uppercase leading-relaxed">${adData.desc}</p></div>
                        <a href="${adData.link}" target="_blank" class="mt-10 w-full bg-black text-white py-5 rounded-2xl font-black uppercase text-[10px] tracking-[0.2em] text-center hover:bg-yellow-500 hover:text-black transition-all shadow-lg">Shop Amazon.ca ‚Üó</a>
                    </div>`;
                }
            });
            grid.innerHTML = html;
        }

        const legalTexts = {
            terms: `<h1 class="text-4xl font-black uppercase mb-8">Universal Terms of Service</h1>
                    <p class="mb-8 leading-relaxed">HardHatHub operates exclusively as a curation and aggregation platform. By utilizing this service, you acknowledge that HardHatHub is not an employer, labor broker, or legal representative. We assume no liability for workplace safety, contractual disputes, or shift inaccuracies at third-party employer sites.</p>`,
            privacy: `<h1 class="text-4xl font-black uppercase mb-8">Data Governance & PIPEDA</h1>
                    <p class="mb-8">HardHatHub adheres strictly to the <strong>Personal Information Protection and Electronic Documents Act (PIPEDA)</strong>. We utilize enterprise-grade data minimization. We do not sell personally identifiable information to third-party marketing firms.</p>`,
            security: `<h1 class="text-4xl font-black uppercase mb-8">Security Architecture</h1>
                    <p class="mb-8">Our infrastructure utilizes <strong>AES-256 Bit Encryption</strong> for all data handshakes. Security protocols are monitored 24/7 to ensure the integrity of the logistics pipeline.</p>`
        };

        function openLegal(type) {
            document.getElementById('feed-container').style.display = 'none';
            document.getElementById('legal-section').classList.add('active-legal');
            document.getElementById('legal-body').innerHTML = legalTexts[type];
            window.scrollTo(0, 0);
        }
        function closeLegal() {
            document.getElementById('feed-container').style.display = 'block';
            document.getElementById('legal-section').classList.remove('active-legal');
        }

        window.onload = fetchJobs;
    </script>
</body>
</html>
     
